<div class="container-fluid">
  <div class="row main-content">
    <div class="col-sm-6 col-sm-offset-3">
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Statistik</h3>
        </div>
        <div class="panel-body">
          <form class="form-horizontal" role="form">
            <div class="form-group">
              <label class="col-sm-3 control-label big-label">Anbud</label>
              <div class="col-sm-9">
                <p class="form-control-static big-output"> {{average.averageOfferPrice|checkNull}} kr/m<sup>2</sup></p>
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-3 control-label big-label">Fakturerat</label>
              <div class="col-sm-9">
                <p class="form-control-static big-output"> {{average.averageFinalPrice|checkNull}} kr/m<sup>2</sup></p>
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-3 control-label big-label">Debiterade timmar</label>
              <div class="col-sm-9">
                <p class="form-control-static big-output"> {{average.averageHours|checkNull}} h/m<sup>2</sup></p>
              </div>
            </div>
          </form>

        </div>
        <div class="panel-footer">
          <p>Baserat på {{nrOfProjectsFiltred}} uppdrag</p>
        </div>
      </div>
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Filter</h3>
        </div>
        <div class="panel-body">
          <div class="row">
            <div class="col-sm-12">
              <div range-slider min="sliderYears.min" max="sliderYears.max" model-min="sliderYears.currentMin"
                   model-max="sliderYears.currentMax"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-3">
              <div id="cities">
                <li class="dropdown">
                  <a class="dropdown-toggle btn btn-default">
                    <i class="fa fa-filter" ng-show="filterActive('cities')"></i>
                    Stad
                    <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('cities', true)">
                      <i class="fa fa-check-square"></i> Markera alla</a>
                    </li>
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('cities', false)">
                      <i class="fa fa-square"></i> Avmarkera alla</a>
                    </li>
                    <li class="divider"></li>
                    <li ng-repeat="city in cities" ng-click="$event.stopPropagation()">
                      <a ng-click="setOjectInFilter(city, !city.activated)">{{city.title}}
                        <i ng-class="{'fa fa-check': city.activated}" class=" pull-right"></i>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>

            <div class="col-sm-3">
              <div id="disciplines">
                <li class="dropdown">
                  <a class="dropdown-toggle btn btn-default">
                    <i class="fa fa-filter" ng-show="filterActive('disciplines')"></i>
                    Disciplin
                    <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('disciplines', true)">
                      <i class="fa fa-check-square"></i> Markera alla</a>
                    </li>
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('disciplines', false)">
                      <i class="fa fa-square"></i> Avmarkera alla</a>
                    </li>
                    <li class="divider"></li>
                    <li ng-repeat="discipline in disciplines" ng-click="$event.stopPropagation()">
                      <a ng-click="setOjectInFilter(discipline, !discipline.activated)">{{discipline.title}}
                        <i ng-class="{'fa fa-check': discipline.activated}" class=" pull-right"></i>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>

            <div class="col-sm-3">
              <div id="levels">
                <li class="dropdown">
                  <a class="dropdown-toggle btn btn-default">
                    <i class="fa fa-filter" ng-show="filterActive('levels')"></i>
                    Skede
                    <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('levels', true)">
                      <i class="fa fa-check-square"></i> Markera alla</a>
                    </li>
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('levels', false)">
                      <i class="fa fa-square"></i> Avmarkera alla</a>
                    </li>
                    <li class="divider"></li>
                    <li ng-repeat="level in levels" ng-click="$event.stopPropagation()">
                      <a ng-click="setOjectInFilter(level, !level.activated)">{{level.title}}
                        <i ng-class="{'fa fa-check': level.activated}" class=" pull-right"></i>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>

            <div class="col-sm-3">
              <div id="types">
                <li class="dropdown">
                  <a class="dropdown-toggle btn btn-default">
                    <i class="fa fa-filter" ng-show="filterActive('types')"></i>
                    Typ
                    <i class="fa fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu">
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('types', true)">
                      <i class="fa fa-check-square"></i> Markera alla</a>
                    </li>
                    <li ng-click="$event.stopPropagation()"><a ng-click="check('types', false)">
                      <i class="fa fa-square"></i> Avmarkera alla</a>
                    </li>
                    <li class="divider"></li>
                    <li ng-repeat="type in types" ng-click="$event.stopPropagation()">
                      <a ng-click="setOjectInFilter(type, !type.activated)">{{type.title}}
                        <i ng-class="{'fa fa-check': type.activated}" class=" pull-right"></i>
                      </a>
                    </li>
                  </ul>
                </li>
              </div>
            </div>
          </div>
          <br>

          <div class="row">
            <div class="col-sm-12">
              <input type="text" class="form-control" placeholder="Sök" ng-model="search">
            </div>
          </div>
        </div>
      </div>
      <div class="panel panel-primary">
        <div class="panel-heading">
          <h3 class="panel-title">Uppdrag</h3>
        </div>
        <div class="panel-body">
          <div class="project-table">
            <button type="button" class="btn btn-success pull-right" ng-click="newProject()">Lägg till</button>
            <br>
            <table class="table table-hover">
              <thead>
              <tr>
                <th class="col-sm-5">
                  <ul class="list-inline">
                    <li>
                      <a ng-click="sort = 'prj_number'; reverse=!reverse">Uppdragsnummer</a>
                    </li>
                    <li>
                      <div>
                        <ul class="list-unstyled filterList">
                          <li>
                            <i  ng-class="{'fa-sort-desc orderActive': isOrderActive('prj_number', false), 'fa-sort-asc orderActive': isOrderActive('prj_number', true)}" class="fa"></i>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </th>
                <th class="col-sm-2">
                  <ul class="list-inline">
                    <li>
                      <a ng-click="sort = 'prj_leader'; reverse=!reverse">UL</a>
                    </li>
                    <li>
                      <div>
                        <ul class="list-unstyled filterList">
                          <li>
                            <i ng-class="{'fa-sort-desc orderActive': isOrderActive('prj_leader', false), 'fa-sort-asc orderActive': isOrderActive('prj_leader', true)}" class="fa"></i>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </th>
                <th class="col-sm-2">
                  <ul class="list-inline">
                    <li>
                      <a ng-click="sort = 'prj_city'; reverse=!reverse">Stad</a>
                    </li>
                    <li>
                      <div>
                        <ul class="list-unstyled filterList">
                          <li>
                            <i ng-class="{'fa-sort-desc orderActive': isOrderActive('prj_city', false), 'fa-sort-asc orderActive': isOrderActive('prj_city', true)}" class="fa"></i>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </th>
                <th  class="col-sm-2">
                  <ul class="list-inline">
                    <li>
                      <a ng-click="sort = 'prj_year'; reverse=!reverse">År</a>
                    </li>
                    <li>
                      <div>
                        <ul class="list-unstyled filterList">
                          <li>
                            <i ng-class="{'fa-sort-desc orderActive': isOrderActive('prj_year', false), 'fa-sort-asc orderActive': isOrderActive('prj_year', true)}" class="fa"></i>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </ul>
                </th>
              </tr>
              </thead>
              <tbody>
              <tr ng-repeat="project in projects | matchProjects:cities:disciplines:levels:types:search:sliderYears.currentMin:sliderYears.currentMax  | orderBy:sort:reverse"
                  ng-click="edit(project.prj_id)">
                <td><a>{{project.prj_number}}: {{project.prj_title}}</a></td>
                <td>{{project.prj_leader}}</td>
                <td>{{project.ci_title}}</td>
                <td>{{project.prj_year}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


